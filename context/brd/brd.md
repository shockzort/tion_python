# Business Requirements Document (BRD) для интеграции бризеров Tion с Яндекс Алисой

## 1. Цели проекта

- **Основная цель**: Реализовать голосовое управление бризерами Tion через Яндекс Алису для повышения удобства контроля за микроклиматом в доме.
- **Дополнительные цели**:
  - Автоматизация управления вентиляцией на основе данных с датчиков CO₂ и иных датчиков.
  - Обеспечение доступа к управлению бризерами для пользователей с ограниченными возможностями.
  - Снижение зависимости от мобильного приложения Tion.

## 2. Ожидаемые результаты

- **Функциональные**:
  - Поддержка голосовых команд через Яндекс Алису:
    - Включение/выключение бризеров.
    - Переключение режимов работы (например, "тихий режим", "турбо").
    - Установка скорости вентиляции для конкретного бризера.
    - Включение-выключение подогрева воздуха, регулировка температуры подогрева.
    - Запрос текущего состояния (температура, уровень CO₂, режим работы).
  - Интеграция с 3 бризерами и 2 датчиками CO₂ через Python-библиотеку TionAPI.
  - Интеграция со сторонними датчиками (температуры, влажности).
  - Возможность управления несколькими бризерами одновременно (групповые команды).
  - Настройка сценариев (например, "ночной режим" — снижение шума и скорости, режим "проветривание").
  - Возможность взаимодействия через веб-интерфейс (оффлайн).
- **Нефункциональные**:
  - Минимальная задержка при выполнении команд (< 3 секунд).
  - Совместимость с linux-сервером на базе Raspberry Pi (или аналогичным) с Bluetooth 4.0+.
  - Безопасное хранение данных аутентификации Яндекс и Tion.
  - Добавление, регистрация и сохранение известных устройств в персистентном хранилище.

## 3. Заинтересованные стороны и их роли

| Роль                | Описание                                                                 |
|----------------------|-------------------------------------------------------------------------|
| **Владелец дома**    | Инициатор проекта, конечный пользователь. Предоставляет оборудование.   |
| **Разработчик**      | Голосовая LLM модель, обеспечивающая реализацию основного функционала.  |
| **Яндекс (Алиса)**   | Обеспечение голосового интерфейса и средств интеграции с ним.           |

## 4. Контекст и область применения

- **Текущая ситуация**: Управление бризерами возможно только через приложение Tion, что неудобно в сценариях, требующих быстрого доступа (например, при высоком уровне CO₂). Приложение не всегда работает, так как функционирует через базовую станцию Tion, которая работает нестабильно.
- **Область применения**:
  - Частные дома и квартиры с установленными бризерами Tion.
  - Сценарии использования:
    - Регулировка вентиляции во время готовки.
    - Автоматическое проветривание при превышении уровня CO₂.
    - Голосовое управление для людей с ограниченной мобильностью.
- **Ограничения**:
  - Радиус действия Bluetooth (до 10 метров без препятствий).
  - Зависимость от Яндекс Алисы.
  - Необходимость постоянного питания сервера.

## 5. Технический контекст

- **Инфраструктура**:
  - Сервер (Raspberry Pi 4/Orange Pi 5/AMD) с ОС Linux и Python 3.10+.
  - Bluetooth-адаптер с поддержкой BLE (BlueZ).
  - Локальная сеть с доступом в интернет для работы Алисы.
- **Компоненты**:
  - Модуль взаимодействия с TionAPI.
  - Голосовой интерфейс через Яндекс Диалоги (Skill для Алисы).
  - Веб-интерфейс для управления сервером (оффлайн, или через приложение для Android).
  - База данных для хранения настроек (SQLite/Redis).
  - Логирование ошибок и статуса устройств.

## 6. Риски

- **Технические**:
  - Нестабильность Bluetooth-соединения.
  - Изменения в API Яндекс без обратной совместимости.
- **Организационные**:
  - Отсутствие документации для неофициального TionAPI.
  - Ограничения по количеству запросов к Алисе (лимиты Яндекс).
